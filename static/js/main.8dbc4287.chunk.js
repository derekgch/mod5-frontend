(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{333:function(e,t,n){e.exports=n.p+"static/media/sd.c66b9051.png"},334:function(e,t,n){e.exports=n(962)},342:function(e,t,n){},344:function(e,t,n){},958:function(e,t){},961:function(e,t,n){e.exports=n.p+"static/media/keyboard.3783a97e.png"},962:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(49),i=n.n(o),s=(n(342),n(7)),l=n(8),c=n(10),u=n(9),p=n(11),d=(n(344),n(28)),f=n(327),h=n.n(f),m=n(328),g=n.n(m),v=n(52),y=n.n(v),E=n(36),w=n.n(E),b=n(324),O=n.n(b),k=n(112),j=n.n(k),S=n(208),x=n.n(S),C=n(326),P=n.n(C),I=n(209),U=n.n(I),A=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleClick=function(){n.setState(function(e){return{open:!e.open}})},n.handleClickAway=function(){n.setState({open:!1})},n.handleClickMenu=function(e){n.props.clickMenu(e.target.id)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.open!==this.state.open}},{key:"render",value:function(){var e=this.props.classes,t=this.state.open;return r.a.createElement("div",{className:e.root},r.a.createElement(O.a,{onClickAway:this.handleClickAway},r.a.createElement("div",null,r.a.createElement(w.a,{onClick:this.handleClick,style:{color:"white"}},r.a.createElement(P.a,null),"Menu"),t?r.a.createElement(j.a,{className:e.paper},r.a.createElement(U.a,{onClick:this.handleClickMenu,id:"math"},"Math"),r.a.createElement(U.a,{onClick:this.handleClickMenu,id:"readme"},"Readme")):null)))}}]),t}(r.a.Component);Object(d.withStyles)(function(e){return{root:{position:"relative"},paper:{position:"absolute",top:36,right:0,left:0},fake:{backgroundColor:x.a[200],height:e.spacing.unit,margin:2*e.spacing.unit,"&:nth-child(2n)":{marginRight:3*e.spacing.unit}}}})(A);var F=Object(d.withStyles)({root:{flexGrow:1},flex:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(function(e){var t=e.classes;return null===e.currentUserId?r.a.createElement(w.a,{color:"inherit",onClick:e.onClick},"Login"):r.a.createElement(w.a,{color:"inherit",onClick:e.logOut},"LogOut"),r.a.createElement("div",{className:t.root},r.a.createElement(h.a,{position:"static",style:{backgroundColor:"#2196F3"}},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"title",color:"inherit",className:t.flex},r.a.createElement(w.a,{color:"inherit",style:{fontSize:"20px"}},"Score: ",e.score," ")))))}),N=n(101),R=n(15),T=n.n(R),L=n(150),_=n.n(L),B=n(82),W=n.n(B),D=n(114),q=n.n(D),M=n(149),G=n.n(M),V=n(115),z=n.n(V),H=n(83),J=n.n(H),K=n(152),Q=n.n(K),Y=n(151),X=n.n(Y),Z=n(46),$="localhost",ee="http://".concat($,":4000/"),te="http://".concat($,":4000/api/v1/"),ne="http://".concat($,":4000/games/top"),ae=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"postLogin",value:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/JSON"},body:JSON.stringify({user_name:e,password:t})};return fetch("".concat(ee,"sessions/"),n)}},{key:"postSignUp",value:function(e){console.log(e);var t={method:"POST",headers:{"Content-Type":"application/JSON"},body:JSON.stringify(e)};return fetch("".concat(ee,"users/"),t)}},{key:"getUser",value:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/JSON",Authorization:t}};return fetch("".concat(ee,"users/").concat(e),n)}},{key:"postGame",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"math",a={method:"POST",headers:{"Content-Type":"application/JSON"},body:JSON.stringify({user_id:e,points:t,type:n})};return fetch("".concat(ee,"games/"),a)}},{key:"postMulti",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/JSON"},body:JSON.stringify(Object(Z.a)({},e,{user_id:e.winner,type:"multi"}))};return fetch("".concat(ee,"games/"),t)}},{key:"patchWord",value:function(e,t){var n={method:"PATCH",headers:{"Content-Type":"application/JSON"},body:JSON.stringify({word:t})};return fetch("".concat(ee,"users/").concat(e),n)}},{key:"getUserWords",value:function(e,t){var n={headers:{"Content-Type":"application/JSON",Authorization:t}};return fetch("".concat(ee,"users/").concat(e),n)}},{key:"getTop5",value:function(){return fetch(ne)}},{key:"getWord",value:function(e){return fetch("".concat(te).concat(e))}}]),e}(),re=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user_name:"",password:"",first_name:"",last_name:"",email:"",showPassword:!1},n.handleChange=function(e){return function(t){n.setState(Object(N.a)({},e,t.target.value))}},n.handleMouseDownPassword=function(e){e.preventDefault()},n.resetState=function(){n.setState({user_name:"",password:"",password_confirmation:"",first_name:"",last_name:"",email:""})},n.handleClickShowPassword=function(){n.setState(function(e){return{showPassword:!e.showPassword}})},n.handleFetchError=function(e){if(e.ok)return e.json();throw console.log(e.message),Error},n.handleClickSignup=function(){console.log(n.state);var e={user_name:n.state.user_name,password:n.state.password,first_name:n.state.first_name,last_name:n.state.last_name,email:n.state.email};ae.postSignUp(e).then(n.handleFetchError).then(function(){n.props.handleClickLogin(n.state)}).catch(function(){return alert("Error")})},n.handleFetchError=function(e){if(e.ok)return e.json();throw console.log(e.message),Error},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.resetState()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"signUpContainer"},r.a.createElement("div",{className:e.root},r.a.createElement(J.a,{label:"User Name",className:T()(e.margin,e.textField),onChange:this.handleChange("user_name")}),r.a.createElement(J.a,{label:"First Name",className:T()(e.margin,e.textField),onChange:this.handleChange("first_name")}),r.a.createElement(J.a,{label:"Last Name",className:T()(e.margin,e.textField),onChange:this.handleChange("last_name")}),r.a.createElement(J.a,{label:"Email Address",className:T()(e.margin,e.textField),onChange:this.handleChange("email")}),r.a.createElement(z.a,{className:T()(e.margin,e.textField)},r.a.createElement(q.a,{htmlFor:"adornment-password"},"Password"),r.a.createElement(W.a,{type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleChange("password"),endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(_.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword},this.state.showPassword?r.a.createElement(X.a,null):r.a.createElement(Q.a,null)))})),r.a.createElement(w.a,{variant:"contained",className:e.button,onClick:this.handleClickSignup},"SingUp")))}}]),t}(r.a.Component),oe=Object(d.withStyles)(function(e){return{button:{margin:e.spacing.unit},root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing.unit},withoutLabel:{marginTop:3*e.spacing.unit},textField:{flexBasis:200}}})(re),ie=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user_name:"",password:"",showPassword:!1,showSignUP:!1},n.handleChange=function(e){return function(t){n.setState(Object(N.a)({},e,t.target.value))}},n.handleMouseDownPassword=function(e){e.preventDefault()},n.resetState=function(){n.setState({user_name:"",password:""})},n.handleClickShowPassword=function(){n.setState(function(e){return{showPassword:!e.showPassword}})},n.handleClickLogin=function(e){var t=e.user_name,a=e.password;console.log(t,a),ae.postLogin(t,a).then(n.handleFetchError).then(function(e){localStorage.setItem("token",e.token),n.props.loggedIn(e)}).catch(function(){alert("wrong username or password"),n.resetState()})},n.handleClickSignup=function(){n.setState({showSignUP:!n.state.showSignUP})},n.handleGuestLogin=function(){n.setState({password:"guest",user_name:"guest"},function(){n.handleClickLogin(n.state)})},n.handleFetchError=function(e){if(e.ok)return e.json();throw console.log(e.message),Error},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.resetState()}},{key:"render",value:function(){var e=this,t=this.props.classes;return console.log(this.state),r.a.createElement("div",{className:"loginContainer"},r.a.createElement("div",{className:t.root},r.a.createElement(J.a,{label:"User name",value:this.state.user_name,className:T()(t.margin,t.textField),onChange:this.handleChange("user_name")}),r.a.createElement(z.a,{className:T()(t.margin,t.textField)},r.a.createElement(q.a,{htmlFor:"adornment-password"},"Password"),r.a.createElement(W.a,{type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleChange("password"),endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(_.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword},this.state.showPassword?r.a.createElement(X.a,null):r.a.createElement(Q.a,null)))})),r.a.createElement(w.a,{variant:"contained",className:t.button,onClick:function(){return e.handleClickLogin(e.state)}},"LOGIN"),r.a.createElement(w.a,{variant:"contained",className:t.button,onClick:this.handleGuestLogin},"Login As Guest"),r.a.createElement(w.a,{variant:"contained",className:t.button,onClick:this.handleClickSignup},"New User")),this.state.showSignUP?r.a.createElement(oe,{handleClickLogin:this.handleClickLogin}):null)}}]),t}(r.a.Component),se=Object(d.withStyles)(function(e){return{button:{margin:e.spacing.unit},root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing.unit},withoutLabel:{marginTop:3*e.spacing.unit},textField:{flexBasis:200}}})(ie),le=n(54),ce=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("rect",{x:this.props.start,y:"35",height:"50",width:"50",fill:"none",stroke:"#ff8a65",strokeWidth:"4"}))}}]),t}(a.Component),ue=["+","-","*","/"],pe=n(504);function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Math.floor(Math.random()*Math.pow(t,e)+1);return 1===n&&n++,n-1}function fe(e){var t=0;return"number"===typeof e&&(t=e.toString().length),t}function he(e,t){for(var n=[],a=de(e);t>0;){for(;n.includes(a);)a=de(e);n.push(a),n.push(ue[de(1,5)-1]),t--}for(;n.includes(a);)a=de(e);return n.push(a),n}function me(e){return e.replace(/[aeiou]/gi,"_")}function ge(e,t){if(e&&t){var n=me(t).toLowerCase();return e.replace(new RegExp(t.toLowerCase(),"g"),n)}return""}function ve(e){return pe.eval(e.join(" "))}var ye={fontFamily:"COURIER",fontSize:120,fill:"#fffff"},Ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).questionToRender=function(e,t){var a=(new Date).getTime();console.log("eq and ans",n.props.eq,n.props.ans);var o=0,i=0,s=0;return e.map(function(e){if(o++,s=i,i="number"===typeof e?63*fe(e)+s:s+63,"number"===typeof e||"="===e)return r.a.createElement("text",Object.assign({x:s,y:"95"},ye,{key:a-o}),e);if(t.length>0){var n=t.shift();return"/"===n&&(n="\xf7"),r.a.createElement("text",Object.assign({x:s,y:"95"},ye,{key:a-o}),n)}return r.a.createElement(ce,{key:a-o,start:s+15})})},n.state={x:n.props.x,y:n.props.y},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.filled.length!==this.props.filled.length||e.op!==this.props.op||e.ans!==this.props.ans}},{key:"totalWidth",value:function(e){var t=0;return e.forEach(function(e){t+="number"===typeof e?66*fe(e):65}),t}},{key:"render",value:function(){var e=[3,"+",1,"-",1],t=[];this.props.eq&&(e=this.props.eq.slice(0)),this.props.filled.length>0&&(t=this.props.filled.slice(0)),e.push("="),e.push(this.props.ans);var n=this.questionToRender(e,t),a=this.totalWidth(e);return r.a.createElement("svg",{width:a,viewBox:"0 0 ".concat(a," 130")},r.a.createElement("g",null,n))}}]),t}(a.Component),we={fontFamily:"COURIER",fontSize:80,fill:"#fffff"},be=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).translatePosition=function(e,t){var n=30/180*Math.PI,a={x:Math.floor(e-60),y:Math.floor(t+120*Math.cos(n))},r={x:Math.floor(e+60),y:Math.floor(t+120*Math.cos(n))};return"M".concat(e," ").concat(t," L").concat(a.x," ").concat(a.y," L").concat(r.x," ").concat(r.y," Z")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.op!==this.props.op}},{key:"render",value:function(){var e=this.translatePosition(this.props.x,this.props.y),t=this.props.op;return"/"===t&&(t="\xf7"),r.a.createElement("svg",{width:"140",height:"120"},r.a.createElement("g",null,r.a.createElement("path",{d:e,fill:"#FF8A65",stroke:"#95a5a6",strokeWidth:"5"}),r.a.createElement("text",Object.assign({x:this.props.x-23,y:this.props.y+90},we),t)))}}]),t}(a.Component),Oe=n(58),ke=n(18),je={fontFamily:"COURIER",fontSize:100,fill:"#fffff"},Se=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isHit=function(){if(n.refs.bullet){var e=n.props.qContainer.getBoundingClientRect(),t=n.refs.bullet.getBoundingClientRect();n.collisionDetetion(e,t)&&n.props.collided(n.props.time,n.props.item)}},n.clearIntervalFn=function(){clearInterval(n.interval)},n.flyUp=function(e,t,a,r){ke.e.fromTo(e,t,{y:0,x:n.props.startAt},{x:n.props.startAt,y:-1200,rotation:0,delay:r,onComplete:n.clearIntervalFn,onCompleteParams:[e,t,a,r],ease:ke.b.easeInOut})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.refs.bullet;this.flyUp(e,2,"bullet",0),this.interval=setInterval(this.isHit,50)}},{key:"componentWillUnmount",value:function(){this.clearIntervalFn()}},{key:"shouldComponentUpdate",value:function(e){return!1}},{key:"collisionDetetion",value:function(e,t){return t.x+35>e.x&&t.x+35<e.x+e.width&&t.y+35>e.y&&t.y+35<e.y+150}},{key:"render",value:function(){var e=this.props.item;return"/"===e&&(e="\xf7"),r.a.createElement("div",{className:"bullet ".concat(this.props.time),ref:"bullet"},r.a.createElement("svg",{width:"70",height:"70"},r.a.createElement("text",{style:je,x:this.props.position.x,y:this.props.position.y},e)))}}]),t}(r.a.Component),xe={fontFamily:"COURIER",fontSize:20,fill:"#fffff"},Ce=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.hint!==e.hint}},{key:"render",value:function(){var e=this.props.hint?" HINT:".concat(this.props.hint):"~  ARROW KEYS : move left right and cycle,  SPACE: fire";return r.a.createElement("div",{className:"insctructionDiv"},r.a.createElement("svg",{width:window.innerWidth},r.a.createElement("text",Object.assign({},xe,{x:"0",y:"130"}),e)))}}]),t}(a.Component),Pe={fontFamily:"COURIER",fontSize:80,fill:"red",stroke:"red",strokeWidth:"3px"},Ie={fontFamily:"COURIER",fontSize:80,fill:"green",stroke:"green",strokeWidth:"3px"},Ue=-window.innerHeight/2,Ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).moveOut=function(){ke.d.fromTo(n.container,2,{x:window.innerWidth/2-150,y:Ue},{x:window.innerWidth+100,y:Ue,repeat:-1,ease:ke.b.easeInOut})},n.right=function(){return r.a.createElement("text",Object.assign({},Ie,{x:0,y:100})," Right! ")},n.wrong=function(){return r.a.createElement("text",Object.assign({},Pe,{x:0,y:100})," Wrong!")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ke.d.fromTo(this.container,2,{x:0,y:Ue},{x:window.innerWidth/2-150,y:Ue,repeat:-1,rotation:360,delay:0,ease:ke.a.easeOut.config(1,.3),onComplete:this.moveOut})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.props.right?this.right():this.wrong();return r.a.createElement("div",{className:"wrContainer",ref:function(t){return e.container=t}},r.a.createElement("svg",{width:"400"},t))}}]),t}(a.Component),Fe="LOGIN_EVENT",Ne="CLICK_LOGIN_EVENT",Re="LOGOUT_EVENT",Te="SET_LEVEL_EVENT",Le="SET_MENU_EVENT",_e="SET_SCORE_EVENT";function Be(e){return{type:Te,payload:e}}var We=n(154),De=n.n(We),qe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).progress=function(e,t){e>100&&(e=100),e>t?n.incHP(e):n.decHP(e,t)},n.decHP=function(e,t){n.setState({completed:e,buffer:t}),setTimeout(function(){n.setState({buffer:e})},1e3)},n.incHP=function(e){n.setState({buffer:e}),setTimeout(function(){n.setState({completed:e})},1e3)},n.state={completed:e.completed,buffer:e.completed},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.completed!==this.props.completed&&this.progress(this.props.completed,e.completed)}},{key:"shouldComponentUpdate",value:function(e,t){return e.completed!==this.props.completed||t.completed!==this.state.completed||t.buffer!==this.state.buffer}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.completed,a=t.buffer;return r.a.createElement("div",{className:"".concat(e.root," hpbar ")},r.a.createElement(De.a,{color:"secondary",variant:"buffer",value:n,valueBuffer:a,style:{height:"12px"}}))}}]),t}(r.a.Component),Me=Object(d.withStyles)({root:{flexGrow:4}})(qe),Ge=n(59),Ve=n.n(Ge),ze=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={opIndex:0,question:null,answer:null,filledOp:[],userEq:[],userAns:null,checkingAns:!1,hp:100},n.setBasePosFn=function(){n.firePlatform&&n.props.setBasePos("SET_BASE_POS",n.firePlatform.getBoundingClientRect().x)},n.lvlUp=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.props,a={digits:t.digits,box:t.box,lvl:t.lvl};return e?n.props.box<3?(a.box++,a):n.props.lvl<2?(a.lvl++,a.box=1,a):(a.digits++,a.box=1,a.lvl=0,a):(a.digits=1,a.box=1,a.lvl=0,a)},n.genNewEq=function(e){var t,a=e.box,r=e.lvl,o=e.digits,i=[1,"+",1];console.log("this.props.box",a),0===r&&(i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[];t>0;)n.push(de(e)),n.push(ue[de(1,3)-1]),t--;return n.push(de(e)),n}(o,a)),1===r&&(i=function(e,t){for(var n=[];t>0;)n.push(de(e)),n.push(ue[de(1,4)-1]),t--;return n.push(de(e)),n}(o,a)),t=ve(i),2===r&&(t=ve(i=he(o,a)),Number.isInteger(t)||(t=parseFloat(t.toPrecision(4)))),n.setState({question:i,answer:t,filledOp:[]})},n.collided=function(e){if(!n.state.checkingAns){var t=n.props.fired.find(function(t){return t.time===e});n.setState({filledOp:Object(le.a)(n.state.filledOp).concat([t.item])},n.displayAnswer);var a=n.props.fired.filter(function(t){return t.time!==e});n.props.updateFired("UPDATE_FIRE",a)}},n.checkAnswer=function(e){if(e!==n.state.answer)n.setState({filledOp:[],userEq:[],userAns:null,hp:n.state.hp-20},function(){n.state.hp<1&&(alert("GAME OVER!"),n.gameOver())});else{var t=n.lvlUp(),a=n.state.hp+5;a>100&&(a=100),n.props.setLevel(t),n.props.setScore(n.props.score+10),n.setState({hp:a}),n.genNewEq(t)}},n.displayAnswer=function(){if(n.state.filledOp.length>=n.props.box&&n.state.question.length>0){var e=function(e,t){var n=[],a=t.slice(0);return e.forEach(function(e){"number"!==typeof e?n.push(a.shift()):n.push(e)}),n}(n.state.question,n.state.filledOp),t=ve(e);Number.isInteger(t)||(t=parseFloat(t.toPrecision(4))),e.length>0&&n.setState({checkingAns:!0,userEq:e,userAns:t},function(){setTimeout(function(){n.setState({checkingAns:!1},function(){return n.checkAnswer(t)})},4500)})}},n.resetGame=function(){var e=n.lvlUp(!1);n.setState({hp:100}),n.genNewEq(e),n.props.setLevel(e),n.props.setScore(0)},n.gameOver=function(){ae.postGame(n.props.userId,n.props.score),n.resetGame()},n.cycleOp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.lvl,a=n.state.opIndex;e?a++:a--,0===t&&(a<0&&(a=1),a%=2),1===t&&(a<0&&(a=2),a%=3),2===t&&(a<0&&(a=3),a%=4),n.setState({opIndex:a})},n.togglePos=function(e,t){var a=n.props.basePos;e?a-=200:a+=200,a>window.innerWidth-100&&(a=window.innerWidth-100),a<0&&(a=0),t&&(a=.615*window.innerWidth-50),ke.d.to(n.firePlatform,2,{x:a,onUpdate:n.setBasePosFn,repeat:-1,ease:ke.c})},n.filterBullet=function(e){var t=n.props.fired;return n.props.fired.length>0&&(t=n.props.fired.filter(function(t){return e-t.time<6e3}),n.props.updateFired("UPDATE_FIRE",t)),t},n.handleKeyEvent=function(e){var t=(new Date).getTime(),a=n.filterBullet(t);switch(e.key){case"ArrowLeft":e.preventDefault(),n.togglePos(!0);break;case"ArrowRight":e.preventDefault(),n.togglePos(!1);break;case"ArrowDown":n.cycleOp(!1);break;case"ArrowUp":n.cycleOp(!0);break;case" ":t-n.props.lastFired>500&&n.props.setFired("FIRE_EVENT",Object(le.a)(a).concat([n.projectile(t)]),t);break;case"Backspace":n.removeFilled()}},n.removeFilled=function(){n.setState({filledOp:[]})},n.flyRight=function(e,t,a,r){ke.e.fromTo(e,t,{y:100,x:-100},{x:window.innerWidth-200,y:100,rotation:0,delay:r,onComplete:n.flyLeft,onCompleteParams:[e,t,a,r],ease:ke.b.easeInOut})},n.flyLeft=function(e,t,a,r){ke.e.fromTo(e,t,{y:100,x:window.innerWidth-200},{x:-100,y:100,rotation:0,delay:r,onComplete:n.flyRight,onCompleteParams:[e,t,a,r],ease:ke.b.easeInOut})},n.projectile=function(e){return{data:r.a.createElement(Se,{hit:!1,position:{x:0,y:70},qContainer:n.refs.qContainer,startAt:n.props.basePos,collided:n.collided,item:ue[n.state.opIndex],key:Ve()(),time:e}),time:e,item:ue[n.state.opIndex]}},n.showUserAns=function(){var e=n.state,t=e.userEq,a=e.userAns,o=e.answer;return r.a.createElement("div",{className:"userEqContainer"},r.a.createElement(Ee,{eq:t,ans:a,filled:n.state.filledOp}),r.a.createElement(Ae,{right:a===o}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.updateFired("UPDATE_FIRE",[]),this.props.setScore(0),this.genNewEq(this.props);var e=this.refs.qContainer;this.flyLeft(e,12,"qContainer",.1),this.togglePos(!0,!0),this.setBasePosFn(),document.addEventListener("keydown",this.handleKeyEvent)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyEvent)}},{key:"render",value:function(){var e=this,t=this.state.checkingAns?this.showUserAns():null;return r.a.createElement("div",{id:"gameContainer"},r.a.createElement("div",{className:"fpContainer",ref:function(t){return e.firePlatform=t}},r.a.createElement(be,{x:65,y:10,op:ue[this.state.opIndex],key:"fireplatform__XD1",setBasePos:this.props.setBasePos,togglePos:this.togglePos})),r.a.createElement("div",{className:"questionContainer",ref:"qContainer"},r.a.createElement(Ee,{eq:this.state.question,ans:this.state.answer,filled:this.state.filledOp})),this.props.fired.map(function(e){return e.data}),t,r.a.createElement(Ce,null),r.a.createElement(Me,{completed:this.state.hp}))}}]),t}(a.Component);var He=Object(Oe.b)(function(e){return{basePos:e.basePos,fired:e.fired,lastFired:e.lastFired,digits:e.digits,box:e.box,lvl:e.lvl,userId:e.currentUserId,score:e.score}},function(e){return{setBasePos:function(t,n){return e({type:t,payload:{data:n}})},setQPos:function(t,n){return e({type:t,payload:{data:n}})},setFired:function(t,n,a,r){return e({type:t,payload:{data:n},time:a,op:r})},updateFired:function(t,n){return e({type:t,payload:{data:n}})},clearBullet:function(t,n){return e({type:t,payload:{data:n}})},setLevel:function(t){return e(Be(t))}}})(ze),Je={fontFamily:"COURIER",fontSize:120,fill:"#fffff"},Ke=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).questionToRender=function(e,t){var a=(new Date).getTime();console.log("Word:",n.props.eq);var o=0,i=0;return e.split("").map(function(e){if(i=63*o,o++,"_"!==e)return r.a.createElement("text",Object.assign({x:i,y:"95"},Je,{key:a-o}),e);if(t.length>0){var n=t.shift();return r.a.createElement("text",Object.assign({x:i,y:"95"},Je,{key:a-o}),n)}return r.a.createElement(ce,{key:a-o,start:i+15})})},n.state={x:n.props.x,y:n.props.y},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.filled.length!==this.props.filled.length||e.eq!==this.props.eq||e.ans!==this.props.ans}},{key:"totalWidth",value:function(e){return 65*e.length}},{key:"render",value:function(){var e="",t=[];this.props.eq&&(e=this.props.eq.slice(0)),this.props.filled.length>0&&(t=this.props.filled.slice(0));var n=this.questionToRender(e,t),a=this.totalWidth(e);return r.a.createElement("svg",{width:a,viewBox:"0 0 ".concat(a," 130")},r.a.createElement("g",null,n))}}]),t}(a.Component),Qe="AEIOU",Ye=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={vowelIndex:0,def:null,answer:null,filledLetter:[],userEq:[],userAns:[],checkingAns:!1,hp:100},n.setBasePosFn=function(){n.firePlatform&&n.props.setBasePos("SET_BASE_POS",n.firePlatform.getBoundingClientRect().x)},n.lvlUp=function(){if(!(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return{digits:1,box:1,lvl:0};var e=n.props,t=e.lvl,a=e.box;return a<3?a++:(t++,a=1),t>2&&(t=2),{digits:e.digits,box:a,lvl:t}},n.genWord=function(e){var t="words";switch(e.lvl){case 1:t="long";break;case 2:t="hard"}ae.getWord(t).then(function(e){return e.json()}).then(function(e){return n.setState({answer:e.word.word.toUpperCase(),def:e.word.def})}).catch(n.setState({answer:"",def:"db offline"}))},n.collided=function(e){if(!n.state.checkingAns){var t=n.props.fired.find(function(t){return t.time===e});n.setState({filledLetter:Object(le.a)(n.state.filledLetter).concat([t.item])},n.displayAnswer);var a=n.props.fired.filter(function(t){return t.time!==e});n.props.updateFired("UPDATE_FIRE",a)}},n.checkAnswer=function(e){if(console.log("checking ans",e,n.state.filledLetter,n.state.answer),e!==n.state.answer)n.setState({filledLetter:[],userEq:[],userAns:null,hp:n.state.hp-20},function(){n.state.hp<1&&(alert("GAME OVER!"),n.gameOver())}),ae.patchWord(n.props.userId,n.state.answer).catch();else{var t=n.lvlUp(),a=n.state.hp+5;a>100&&(a=100),n.props.setLevel(t),n.setState({filledLetter:[],hp:a}),n.genWord(t),n.props.setScore(n.props.score+10)}},n.displayAnswer=function(){if(n.state.filledLetter.length>=(n.state.answer.match(/[aeiou]/gi)||[]).length&&n.state.answer.length>0){var e;(e=function(e,t){for(var n=e.slice(0),a=t.slice(0),r=0;r<n.length;r++)"_"===n[r]&&(n=n.substr(0,r)+a.shift()+n.substr(r+1));return n}(me(n.state.answer),n.state.filledLetter)).length>0&&n.setState({checkingAns:!0,userAns:e},function(){setTimeout(function(){n.setState({checkingAns:!1},function(){return n.checkAnswer(e)})},4500)})}},n.resetGame=function(){var e=n.lvlUp(!1);n.setState({hp:100}),n.genWord(e),n.props.setLevel(e),n.props.setScore(0)},n.gameOver=function(){ae.postGame(n.props.userId,n.props.score,"word"),n.resetGame()},n.cycleOp=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.lvl;var t=n.state.vowelIndex;e?t++:t--,t<0&&(t=4),t%=5,n.setState({vowelIndex:t})},n.togglePos=function(e,t){var a=n.props.basePos;e?a-=200:a+=200,a>window.innerWidth-100&&(a=window.innerWidth-100),a<0&&(a=0),t&&(a=.615*window.innerWidth-50),ke.d.to(n.firePlatform,2,{x:a,onUpdate:n.setBasePosFn,repeat:-1,ease:ke.c})},n.filterBullet=function(e){var t=n.props.fired;return n.props.fired.length>0&&(t=n.props.fired.filter(function(t){return e-t.time<6e3}),n.props.updateFired("UPDATE_FIRE",t)),t},n.handleKeyEvent=function(e){var t=(new Date).getTime(),a=n.filterBullet(t);switch(console.log(e.key),e.key){case"ArrowLeft":e.preventDefault(),n.togglePos(!0);break;case"ArrowRight":e.preventDefault(),n.togglePos(!1);break;case"ArrowDown":n.cycleOp(!1);break;case"ArrowUp":n.cycleOp(!0);break;case" ":t-n.props.lastFired>500&&n.props.setFired("FIRE_EVENT",Object(le.a)(a).concat([n.projectile(t)]),t);break;case"Backspace":n.removeFilled()}},n.removeFilled=function(){n.setState({filledLetter:[]})},n.flyRight=function(e,t,a,r){ke.e.fromTo(e,t,{y:100,x:-100},{x:window.innerWidth-300,y:100,rotation:0,delay:r,onComplete:n.flyLeft,onCompleteParams:[e,t,a,r],ease:ke.b.easeInOut})},n.flyLeft=function(e,t,a,r){ke.e.fromTo(e,t,{y:100,x:window.innerWidth-300},{x:-100,y:100,rotation:0,delay:r,onComplete:n.flyRight,onCompleteParams:[e,t,a,r],ease:ke.b.easeInOut})},n.projectile=function(e){return{data:r.a.createElement(Se,{hit:!1,position:{x:0,y:70},qContainer:n.refs.qContainer,startAt:n.props.basePos,collided:n.collided,item:Qe[n.state.vowelIndex],key:Ve()(),time:e}),time:e,item:Qe[n.state.vowelIndex]}},n.showUserAns=function(){var e=n.state,t=(e.userEq,e.userAns),a=e.answer;return r.a.createElement("div",{className:"userEqContainer"},r.a.createElement(Ae,{right:t===a}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setScore(0),this.props.updateFired("UPDATE_FIRE",[]),this.genWord(this.props);var e=this.refs.qContainer;this.flyLeft(e,10,"qContainer",.1),this.togglePos(!0,!0),this.setBasePosFn(),document.addEventListener("keydown",this.handleKeyEvent)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyEvent)}},{key:"render",value:function(){var e=this,t=this.state.checkingAns?this.showUserAns():null,n=this.state.answer?me(this.state.answer):null;return r.a.createElement("div",{id:"gameContainer"},r.a.createElement("div",{className:"fpContainer",ref:function(t){return e.firePlatform=t}},r.a.createElement(be,{x:65,y:10,op:Qe[this.state.vowelIndex],key:"fireplatform__XD1",setBasePos:this.props.setBasePos,togglePos:this.togglePos})),r.a.createElement("div",{className:"questionContainer",ref:"qContainer"},r.a.createElement(Ke,{filled:this.state.filledLetter,eq:n})),this.props.fired.map(function(e){return e.data}),t,r.a.createElement(Ce,{hint:ge(this.state.def,this.state.answer)}),r.a.createElement(Me,{completed:this.state.hp}))}}]),t}(a.Component);var Xe=Object(Oe.b)(function(e){return{basePos:e.basePos,fired:e.fired,lastFired:e.lastFired,digits:e.digits,box:e.box,lvl:e.lvl,userId:e.currentUserId,score:e.score}},function(e){return{setBasePos:function(t,n){return e({type:t,payload:{data:n}})},setQPos:function(t,n){return e({type:t,payload:{data:n}})},setFired:function(t,n,a){return e({type:t,payload:{data:n},time:a})},updateFired:function(t,n){return e({type:t,payload:{data:n}})},clearBullet:function(t,n){return e({type:t,payload:{data:n}})},setLevel:function(t){return e(Be(t))}}})(Ye),Ze=n(330),$e=n.n(Ze),et=n(331),tt=n.n(et);var nt=Object(d.withStyles)({card:{minWidth:250},bullet:{display:"inline-block",margin:"3px 2px",transform:"scale(0.8)"},title:{marginBottom:16,fontSize:14},pos:{marginBottom:12}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement($e.a,{className:t.card,style:{margin:"15px"}},r.a.createElement(tt.a,null,r.a.createElement(y.a,{variant:"headline",component:"h2"},e.word),r.a.createElement(y.a,{component:"p"},e.def))))}),at=n(53),rt=n.n(at),ot=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={words:[]},n.getWords=function(){var e=localStorage.getItem("token");ae.getUserWords(n.props.id,e).then(function(e){return e.json()}).then(function(e){return n.setState({words:e.words},console.log)})},n.toDisplay=function(){return n.state.words.length>0?n.state.words.map(function(e){return r.a.createElement(rt.a,{key:Ve()(),item:!0,xs:"auto"},r.a.createElement(nt,{word:e.word,def:e.def})," ")}):r.a.createElement(rt.a,{key:Ve()()},r.a.createElement(nt,{word:"Empty",def:"Nothing, nil, null"})," ")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getWords()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"wordListContianer"},r.a.createElement(rt.a,{container:!0,spacing:16},r.a.createElement(rt.a,{className:e.root,container:!0,item:!0,xs:12},this.toDisplay())))}}]),t}(a.Component),it=Object(d.withStyles)(function(e){return{root:{flexGrow:1},paper:{height:140,width:100},control:{padding:10}}})(ot),st=n(116),lt=n.n(st),ct=n(113),ut=n.n(ct),pt=n(155),dt=n.n(pt);var ft=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props.classes;return r.a.createElement(rt.a,{item:!0,xs:"auto",md:"auto",alignItems:"center"},r.a.createElement(y.a,{variant:"title",className:t.title},this.props.title),r.a.createElement("div",{className:t.demo},r.a.createElement(lt.a,null,this.props.data?(e=this.props.data).map(function(t){var n=t.user;return t.user.length<1&&(n="guest"),r.a.createElement(ut.a,{key:e[t]+t.point},r.a.createElement(dt.a,{primary:"User: ".concat(n," Points: ").concat(t.point," ")}))}):null)))}}]),t}(r.a.Component),ht=Object(d.withStyles)(function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:"".concat(4*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px")}}})(ft);var mt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(rt.a,{item:!0,xs:"auto",md:"auto",alignItems:"center"},r.a.createElement(y.a,{variant:"title",className:e.title},this.props.title),r.a.createElement("div",{className:e.demo},r.a.createElement(lt.a,null,this.props.data?function(e){var t=[];return t=Object.keys(e).sort(function(t,n){return e[n]-e[t]}),console.log(t),t.map(function(t){var n=t;return""==t&&(n="guest"),r.a.createElement(ut.a,{key:e[t]+n},r.a.createElement(dt.a,{primary:"User: ".concat(n," Wins: ").concat(e[t]," ")}))})}(this.props.data):null)))}}]),t}(r.a.Component),gt=Object(d.withStyles)(function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:"".concat(4*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px")}}})(mt),vt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={math:[],word:[],multi:[]},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;ae.getTop5().then(function(e){return e.json()}).then(function(t){return e.setState({math:t.math,word:t.word,multi:t.multi})})}},{key:"render",value:function(){var e=this.props.classes;return console.log(this.state.multi),r.a.createElement("div",{className:"scoreContainer"},r.a.createElement("div",{className:e.root},r.a.createElement("h1",null,"TOP 5 Score Board"),r.a.createElement(rt.a,{container:!0,spacing:16,direction:"row",alignItems:"flex-start"},r.a.createElement(ht,{title:"Math Score Board",data:this.state.math}),r.a.createElement(ht,{title:"Word Score Board",data:this.state.word}),r.a.createElement(gt,{title:"Multi Score Board",data:this.state.multi}))))}}]),t}(r.a.Component),yt=Object(d.withStyles)(function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:"".concat(4*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px")}}})(vt),Et=n(332),wt=n.n(Et),bt={fontFamily:"COURIER",fontSize:80,fill:"#fffff"},Ot=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).translatePosition=function(e,t){var n=30/180*Math.PI,a={x:Math.floor(e+120),y:t},r={x:Math.floor(e+60),y:Math.floor(t+120*Math.cos(n))};return"M".concat(e," ").concat(t," L").concat(a.x," ").concat(a.y," L").concat(r.x," ").concat(r.y," Z")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.op!==this.props.op}},{key:"render",value:function(){var e=this.translatePosition(this.props.x,this.props.y),t=this.props.op;return"/"===t&&(t="\xf7"),r.a.createElement("svg",{width:"140",height:"120"},r.a.createElement("g",null,r.a.createElement("path",{d:e,fill:"#888",stroke:"#222",strokeWidth:"5"}),r.a.createElement("text",Object.assign({x:this.props.x+35,y:this.props.y+70},bt),t)))}}]),t}(a.Component),kt=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).progress=function(e,t){e>100&&(e=100),e>t?n.incHP(e):n.decHP(e,t)},n.decHP=function(e,t){n.setState({completed:e,buffer:t}),setTimeout(function(){n.setState({buffer:e})},1e3)},n.incHP=function(e){n.setState({buffer:e}),setTimeout(function(){n.setState({completed:e})},1e3)};var a=e.completed;return e.completed||(a=100),n.state={completed:a,buffer:a},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.completed!==this.props.completed&&this.progress(this.props.completed,e.completed)}},{key:"shouldComponentUpdate",value:function(e,t){return e.completed!==this.props.completed||t.completed!==this.state.completed||t.buffer!==this.state.buffer}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.completed,a=t.buffer;return r.a.createElement("div",{className:"".concat(e.root," otherHPbar ")},r.a.createElement(De.a,{color:"secondary",variant:"buffer",value:n,valueBuffer:a,style:{height:"12px"}}))}}]),t}(r.a.Component),jt=Object(d.withStyles)({root:{flexGrow:4}})(kt),St={fontFamily:"COURIER",fontSize:30,fill:"#E35435"},xt={fontFamily:"COURIER",fontSize:100,fill:"#E35435"},Ct=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={count:3,ready:!1},n.clearIntervalFn=function(){clearInterval(n.countInterval)},n.countDown=function(){console.log("wwht"),n.state.count>0&&!n.props.waiting&&n.setState({count:n.state.count-1}),n.state.count<1&&(n.clearIntervalFn(),n.moveOutOfScreen(),setTimeout(n.props.runGame,2500))},n.handleClick=function(){n.setState({ready:!0}),n.props.getReady()},n.moveOutOfScreen=function(){ke.d.to(n.container,3,{x:window.innerWidth+100,ease:ke.c,onComplete:n.clearIntervalFn,onCompleteParams:[]})},n.toDisplay=function(){return n.state.ready?n.props.waiting?r.a.createElement("text",{style:St,x:300,y:110,alignmentBaseline:"middle",textAnchor:"middle"},"Waiting for other player..."," "):0===n.state.count?r.a.createElement("text",{style:xt,x:300,y:110,alignmentBaseline:"middle",textAnchor:"middle"},"Start!"," "):r.a.createElement("text",{style:xt,x:300,y:110,alignmentBaseline:"middle",textAnchor:"middle"},n.state.count):null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.clearIntervalFn()}},{key:"componentDidUpdate",value:function(e,t){e.waiting!==this.props.waiting&&(this.props.waiting||(this.countInterval=setInterval(this.countDown,999)),this.props.waiting&&this.setState({ready:!1}))}},{key:"shouldComponentUpdate",value:function(e,t){return e.waiting!==this.props.waiting||t.count!==this.state.count||t.ready!==this.state.ready}},{key:"render",value:function(){var e=this,t=this.state.ready?null:r.a.createElement(w.a,{onClick:this.handleClick,style:{fontSize:30,fontFamily:"COURIER",color:"red"}},"READY!");return r.a.createElement("div",{className:"waitingScreen",ref:function(t){return e.container=t}},r.a.createElement("svg",{width:"600"},this.toDisplay()),r.a.createElement("div",null,t))}}]),t}(a.Component),Pt={fontFamily:"COURIER",fontSize:70,fill:"#8d7f32"},It=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("rect",{x:this.props.start,y:"35",height:"50",width:"50",fill:"none",stroke:"#ff8a65",strokeWidth:"4"}),r.a.createElement("text",{style:Pt,y:"82",x:"82"},"?"))}}]),t}(a.Component),Ut={fontFamily:"COURIER",fontSize:120,fill:"#fffff"},At=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).questionToRender=function(e,t){var a=(new Date).getTime();console.log("eq and ans",n.props.eq,n.props.ans);var o=0,i=0,s=0;return e.map(function(e){if(o++,s=i,i="number"===typeof e?63*fe(e)+s:s+63,"number"===typeof e||"="===e)return r.a.createElement("text",Object.assign({x:s,y:"95"},Ut,{key:a-o}),e);if(t.length>0){var n=t.shift();return"/"===n&&(n="\xf7"),r.a.createElement("text",Object.assign({x:s,y:"95"},Ut,{key:a-o}),n)}return 2===o?r.a.createElement(It,{key:a-o,start:s+15}):r.a.createElement(ce,{key:a-o,start:s+15})})},n.state={x:n.props.x,y:n.props.y},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.filled.length!==this.props.filled.length||e.op!==this.props.op||e.ans!==this.props.ans}},{key:"totalWidth",value:function(e){var t=0;return e.forEach(function(e){t+="number"===typeof e?66*fe(e):65}),t}},{key:"render",value:function(){var e=[3,"+",1,"-",1],t=[];this.props.eq&&(e=this.props.eq.slice(0)),this.props.filled.length>0&&(t=this.props.filled.slice(0)),e.push("="),e.push(this.props.ans);var n=this.questionToRender(e,t),a=this.totalWidth(e)+100;return r.a.createElement("svg",{width:a,viewBox:"0 0 ".concat(a," 130")},r.a.createElement("g",null,n))}}]),t}(a.Component),Ft={fontFamily:"COURIER",fontSize:100,fill:"#fffff"},Nt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.props.resetGame()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.winner?"You Won!":"You Lost!";return r.a.createElement("div",{className:"waitingScreen"},r.a.createElement("svg",{width:"600"},r.a.createElement("text",{style:Ft,y:60},e)),r.a.createElement(w.a,{onClick:this.handleClick,style:{fontSize:30,fontFamily:"COURIER",color:"red"}},"PLAY AGAIN"))}}]),t}(a.Component),Rt={fontFamily:"COURIER",fontSize:100,fill:"#E35435"},Tt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isHit=function(){if(n.refs.bullet){var e=n.props.qContainer.getBoundingClientRect(),t=n.refs.bullet.getBoundingClientRect();n.collisionDetetion(e,t)&&n.props.collided(n.props.time)}},n.clearIntervalFn=function(){clearInterval(n.interval)},n.flyDown=function(e,t,a,r){ke.e.fromTo(e,t,{y:0,x:n.props.startAt},{x:n.props.startAt,y:1200,rotation:0,delay:r,onComplete:n.props.removeBullet,onCompleteParams:[n.props.time],ease:ke.b.easeInOut})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.refs.bullet;this.flyDown(e,2,"bullet2",0),this.interval=setInterval(this.isHit,50)}},{key:"componentWillUnmount",value:function(){this.clearIntervalFn()}},{key:"shouldComponentUpdate",value:function(e){return!1}},{key:"collisionDetetion",value:function(e,t){return t.x+35>e.x&&t.x+35<e.x+e.width&&t.y+35>e.y&&t.y+35<e.y+150}},{key:"render",value:function(){var e=this.props.item;return"/"===e&&(e="\xf7"),r.a.createElement("div",{className:"otherBullet ".concat(this.props.time),ref:"bullet"},r.a.createElement("svg",{width:"70",height:"70"},r.a.createElement("text",{style:Rt,x:this.props.position.x,y:this.props.position.y},e)))}}]),t}(r.a.Component),Lt=wt()("http://".concat($,":5000")),_t=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).runGame=function(){n.state.started&&n.setState({pause:!1})},n.gameOver=function(e){e.loser!==Lt.id?(console.log(n.state.self,n.state.other),n.setState({winner:!0,pause:!0}),ae.postMulti({winner:n.state.self.userId,loser:n.state.other.userId,winnerP:n.state.self.score,loserP:n.state.other.score})):(console.log("LOSER!"),n.setState({winner:!1,pause:!0}))},n.resetGame=function(){n.setState({started:!1,pause:!1,winner:null,otherBullet:[],opIndex:0,question:[],answer:null,correntOP:null}),n.props.setScore(0),Lt.emit("UNMOUNT")},n.getPlayers=function(e){Object.keys(e).forEach(function(t){e[t].playerId===Lt.id?(console.log("self",t),n.setState({self:e[t]},function(){n.props.setScore(n.state.self.score)})):(console.log("other",t),n.setState({other:e[t]}))})},n.userDisconnected=function(e){console.log("user disconnected"),n.resetGame()},n.removeBullet=function(e){var t=n.state.otherBullet.filter(function(t){return t.time!==e});n.setState({otherBullet:Object(le.a)(t)})},n.genNewEq=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return he(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e)},n.setBasePosFn=function(){if(n.firePlatform){var e=100*n.firePlatform.getBoundingClientRect().x/window.innerWidth;n.props.setBasePos("SET_BASE_POS",e),n.setState({self:Object(Z.a)({},n.state.self,{x:e})}),n.reportSelfPos(e)}},n.updateQuestion=function(e){console.log(e);var t=ve(e);Number.isInteger(t)||(t=parseFloat(t.toPrecision(4))),n.setState({question:e,answer:t})},n.updateSelf=function(e){n.setState({self:e})},n.updatePlayerFire=function(e){console.log(e);var t=(new Date).getTime(),a=n.otherProjectile(e.bullet.time,e.bullet.op,e.bullet.pos),r=n.state.otherBullet.filter(function(e){return t-e.time<6e3});n.setState({otherBullet:Object(le.a)(r).concat([a])})},n.updateOtherPlayer=function(e){e&&n.state.other&&e.playerId===n.state.other.playerId&&n.setState({other:e},function(){return n.otherPlayerPos(e)})},n.reportUserReady=function(){Lt.emit("USER_READY",Lt.id)},n.reportQuestion=function(){Lt.emit("GET_QUESTIONS",n.genNewEq())},n.reportPlayerHit=function(e){Lt.emit("BULLET_HIT",{otherPlayer:n.state.other.playerId,op:e})},n.reportFireEvent=function(e){Lt.emit("FIRED",{time:e,op:ue[n.state.opIndex],pos:n.state.self.x})},n.reportSelfPos=function(e){Lt.emit("MOVED",{playerId:n.state.self.playerId,x:e})},n.reportReady=function(){Lt.emit("USER_READY",Lt.id)},n.reportUsername=function(){n.props.userId&&Lt.emit("USER_ID",n.props.userId)},n.togglePos=function(e,t){var a=n.props.basePos*window.innerWidth/100;e?a-=50:a+=50,a>window.innerWidth-100&&(a=window.innerWidth-100),a<0&&(a=0),t&&(a=.615*window.innerWidth-50),ke.d.to(n.firePlatform,.5,{x:a,onUpdate:n.setBasePosFn,repeat:-1,ease:ke.c})},n.otherPlayerPos=function(e){var t=window.innerWidth-e.x*window.innerWidth/100-100;ke.d.to(n.otherPlayer,.5,{x:t,repeat:-1,ease:ke.c})},n.filterBullet=function(e){var t=n.props.fired;return n.props.fired.length>0&&(t=n.props.fired.filter(function(t){return e-t.time<6e3}),n.props.updateFired("UPDATE_FIRE",t)),t},n.cycleOp=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.lvl;var t=n.state.opIndex;e?t++:t--,t<0&&(t=3),t%=4,n.setState({opIndex:t})},n.handleKeyEvent=function(e){if(n.state.pause)return e.preventDefault(),null;var t=(new Date).getTime(),a=n.filterBullet(t);switch(e.key){case"ArrowLeft":e.preventDefault(),n.togglePos(!0);break;case"ArrowRight":e.preventDefault(),n.togglePos(!1);break;case"ArrowDown":e.preventDefault(),n.cycleOp(!1);break;case"ArrowUp":e.preventDefault(),n.cycleOp(!0);break;case" ":e.preventDefault(),t-n.props.lastFired>100&&(n.reportFireEvent(t),n.props.setFired("FIRE_EVENT",Object(le.a)(a).concat([n.projectile(t)]),t))}},n.collided=function(e,t){if(!n.state.checkingAns){n.reportPlayerHit(t);var a=n.props.fired.filter(function(t){return t.time!==e});n.props.updateFired("UPDATE_FIRE",a)}},n.collidedOther=function(e){if(!n.state.checkingAns){var t=n.state.otherBullet.filter(function(t){return t.time!==e});n.setState({otherBullet:Object(le.a)(t)})}},n.displayOtherBullet=function(){return n.state.otherBullet.map(function(e){return e.data})},n.otherProjectile=function(e,t,a){return console.log(a),{data:r.a.createElement(Tt,{hit:!1,position:{x:0,y:70},qContainer:n.firePlatform,startAt:window.innerWidth-60-a*window.innerWidth/100,collided:n.collidedOther,item:"?",removeBullet:n.removeBullet,key:"bullet  ".concat(Ve()()),time:e}),time:e,item:t}},n.projectile=function(e){return{data:r.a.createElement(Se,{hit:!1,position:{x:0,y:70},qContainer:n.otherPlayer,startAt:n.props.basePos*window.innerWidth/100+40,collided:n.collided,item:ue[n.state.opIndex],key:Ve()(),time:e}),time:e,item:"+"}},n.startOrGameOver=function(){return n.state.started&&!n.state.pause?r.a.createElement("div",{className:"multiPlayerQContainer",key:"multiPlayerQContainer"}," ",r.a.createElement(At,{eq:n.state.question,ans:n.state.answer,filled:[]})," "):null!==n.state.winner?r.a.createElement(Nt,{key:"endingScreen",winner:n.state.winner,resetGame:n.resetGame}):r.a.createElement(Ct,{key:"StartScreen",waiting:!n.state.started,runGame:n.runGame,getReady:n.reportReady})},n.state={self:null,other:null,otherBullet:[],opIndex:0,question:[],answer:null,correntOP:null,pause:!1,started:!1,winner:null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Lt.emit("RESTART"),Lt.on("ALL_PLAYERS",function(t){return e.getPlayers(t)}),Lt.on("PLAYER_SELF",function(t){return e.updateSelf(t)}),Lt.on("PLAYER_MOVED",function(t){return e.updateOtherPlayer(t)}),Lt.on("PLAYER_FIRED",function(t){return e.updatePlayerFire(t)}),Lt.on("PLAYER_HIT",function(t){return e.getPlayers(t)}),Lt.on("NEW_QUESTIONS",function(t){return e.updateQuestion(t)}),Lt.on("START_GAME",function(t){return e.initGame(t)}),Lt.on("GAME_OVER",function(t){return e.gameOver(t)}),Lt.on("disconnect",function(t){return e.userDisconnected(t)}),this.props.updateFired("UPDATE_FIRE",[]),this.reportUsername(),document.addEventListener("keydown",this.handleKeyEvent),this.togglePos(!0,!0),this.props.setLevel({digits:1,box:2,lvl:2})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyEvent),console.log("unmount event"),Lt.emit("UNMOUNT")}},{key:"initGame",value:function(e){this.reportQuestion(),this.setState({started:e,pause:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"fpContainer",ref:function(t){return e.firePlatform=t}},r.a.createElement(be,{x:65,y:10,op:ue[this.state.opIndex]})),r.a.createElement("div",{className:"OtherPContainer",ref:function(t){return e.otherPlayer=t}},r.a.createElement(Ot,{op:"?",x:5,y:10})),this.props.fired.map(function(e){return e.data}),this.displayOtherBullet(),r.a.createElement(Me,{completed:this.state.self?this.state.self.hp:100}),r.a.createElement(jt,{completed:this.state.other?this.state.other.hp:100}),this.startOrGameOver())}}]),t}(a.Component);var Bt=Object(Oe.b)(function(e){return{basePos:e.basePos,fired:e.fired,lastFired:e.lastFired,digits:e.digits,box:e.box,lvl:e.lvl,userId:e.currentUserId,score:e.score,userName:e.currentUserName}},function(e){return{setBasePos:function(t,n){return e({type:t,payload:{data:n}})},setQPos:function(t,n){return e({type:t,payload:{data:n}})},setFired:function(t,n,a){return e({type:t,payload:{data:n},time:a})},updateFired:function(t,n){return e({type:t,payload:{data:n}})},clearBullet:function(t,n){return e({type:t,payload:{data:n}})},setLevel:function(t){return e(Be(t))}}})(_t),Wt=(n(961),n(333)),Dt=n.n(Wt),qt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"instructionKeyBoard"},r.a.createElement(He,{score:this.props.score,setScore:this.props.setScore}),r.a.createElement("img",{src:Dt.a,style:{},className:"strech"}))}}]),t}(a.Component),Mt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).displayContent=function(){var e=null;switch(n.props.menu){case"math":e=r.a.createElement(He,{score:n.props.score,setScore:n.props.setScore});break;case"word":e=r.a.createElement(Xe,{score:n.props.score,setScore:n.props.setScore});break;case"list":e=r.a.createElement(it,{id:n.props.currentUserId});break;case"readme":e=r.a.createElement(qt,{score:n.props.score,setScore:n.props.setScore});break;case"multi":e=r.a.createElement(Bt,{score:n.props.score,setScore:n.props.setScore});break;case"score":e=r.a.createElement(yt,{id:n.props.currentUserId});break;default:e=r.a.createElement(qt,{score:n.props.score,setScore:n.props.setScore})}return e},n.handleLogout=function(){n.props.logOut(),localStorage.removeItem("token")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.body.style="background: #ECEFF1;";var e=localStorage.getItem("token");if(e){var t=JSON.parse(atob(e.split(".")[1]));this.props.loggedIn(t)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App",style:{backgroundColor:"#ECEFF1"}},r.a.createElement(F,{currentUserId:this.props.currentUserId,score:this.props.score,userId:this.props.currentUserId,logOut:this.handleLogout,clickMenu:this.props.clickMenu,onClick:function(){return e.props.showLogin(!e.props.showLoginPage)}}),this.props.showLoginPage?r.a.createElement(se,{loggedIn:this.props.loggedIn}):this.displayContent())}}]),t}(a.Component),Gt=Object(Oe.b)(function(e){return{showLoginPage:e.showLoginPage,currentUserName:e.currentUserName,currentUserId:e.currentUserId,menu:e.menu,score:e.score}},function(e){return{showLogin:function(t){return e(function(e){return{type:Ne,payload:e}}(t))},loggedIn:function(t){return e(function(e){return{type:Fe,payload:e}}(t))},logOut:function(){return e({type:Re})},clickMenu:function(t){return e(function(e){return{type:Le,payload:e}}(t))},setScore:function(t){return e(function(e){return{type:_e,payload:e}}(t))}}})(Mt),Vt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function zt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ht=n(153),Jt={showLoginPage:!1,currentUserId:null,currentUserName:null,basePos:500,fired:[],lastFired:null,menu:"math",digits:1,box:1,lvl:0,score:0};var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCORE_EVENT":return Object(Z.a)({},e,{score:t.payload});case"SET_MENU_EVENT":return Object(Z.a)({},e,{menu:t.payload,showLoginPage:!1});case"SET_LEVEL_EVENT":console.log("action",t.payload);var n=t.payload,a=n.digits,r=n.box,o=n.lvl;return Object(Z.a)({},e,{digits:a,box:r,lvl:o});case"CLICK_LOGIN_EVENT":return Object(Z.a)({},e,{showLoginPage:t.payload});case"LOGIN_EVENT":var i=t.payload;return Object(Z.a)({},e,{currentUserId:i.id,currentUserName:i.user_name,showLoginPage:!1});case"LOGOUT_EVENT":return Object(Z.a)({},e,{currentUserId:null,currentUserName:null});case"SET_BASE_POS":return Object(Z.a)({},e,{basePos:t.payload.data});case"FIRE_EVENT":return Object(Z.a)({},e,{fired:t.payload.data,lastFired:t.time});case"UPDATE_FIRE":return Object(Z.a)({},e,{fired:t.payload.data});default:return e}},Qt=Object(Ht.b)(Kt);console.log(Qt),console.log("after createStore",Qt.getState()),i.a.render(r.a.createElement(Oe.a,{store:Qt},r.a.createElement(Gt,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/play-and-learn-frontend",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/play-and-learn-frontend","/service-worker.js");Vt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):zt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):zt(e)})}}()}},[[334,2,1]]]);
//# sourceMappingURL=main.8dbc4287.chunk.js.map